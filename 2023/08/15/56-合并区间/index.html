<!DOCTYPE html>
<html>
  <!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  
  <title>56. 合并区间 - 扯淡有理</title>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:site" content="扯淡有理"/>
  <meta name="twitter:creator" content="@songneverend"/>
  <meta name="twitter:title" content="56. 合并区间 - 扯淡有理"/>
  <meta name="twitter:description" content="Java Python R 机器学习 统计 扯淡"/>
  <meta name="twitter:image" content="https://naosense.github.io/2023/08/15/56-%E5%90%88%E5%B9%B6%E5%8C%BA%E9%97%B4/intervals.png"/>
  <meta property="og:site_name" content="扯淡有理">
  <meta property="og:title" content="56. 合并区间 - 扯淡有理"/>
  <meta property="og:type" content="website"/>
  <meta property="og:locale" content="zh-CN"/>
  <meta property="og:description" content="Java Python R 机器学习 统计 扯淡"/>
  <meta property="og:image" content="https://naosense.github.io/2023/08/15/56-%E5%90%88%E5%B9%B6%E5%8C%BA%E9%97%B4/intervals.png"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  
  <meta name="keywords" content=leetcode,hot100>
  
  <meta name="description" content="Java Python R 机器学习 统计 扯淡">
  
  
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.02">
  
  
  <link rel="alternate" href="/atom.xml " title="扯淡有理" type="application/atom+xml">
  
  <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/11.7.0/styles/github.min.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script src="https://cdn.bootcss.com/highlight.js/11.7.0/highlight.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.7.0/languages/scala.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.7.0/languages/ocaml.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.7.0/languages/scheme.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=default"></script>
  <script>
      hljs.highlightAll();
  </script>
  <script type='text/x-mathjax-config'>
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/SVG"],
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
        },
        messageStyle: "none"
    });
  </script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D4YST94BJZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-D4YST94BJZ');
  </script>
  <!-- fancbox -->
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"/>
  <script>
    $(document).ready(function () {
        $("img").each(function () {
            var image = $(this);
            var caption = image.attr("alt");
            var src = image.attr("src");
            link = image.wrap("<a href='" + src + "'></a>").parent("a");
            link.attr("data-fancybox", "post image");
            if (caption) {
                link.attr("data-caption", caption);
            }
        });

        Fancybox.bind("[data-fancybox]", {
            // Your custom options
        });
    });
  </script>

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

  <body>
    <div class="container">
      <header class="header">
  <div class="blog-title">
    <a href="/" class="logo">扯淡有理</a>
    <div class="subtitle"></div>
  </div>
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/archives" class="menu-item-link">主页</a>
        </li>
      
        <li class="menu-item">
          <a href="/tags" class="menu-item-link">标签</a>
        </li>
      
        <li class="menu-item">
          <a href="/books" class="menu-item-link">读书</a>
        </li>
      
        <li class="menu-item">
          <a href="/atom.xml" class="menu-item-link">订阅</a>
        </li>
      
        <li class="menu-item">
          <a href="/links" class="menu-item-link">友链</a>
        </li>
      
        <li class="menu-item">
          <a href="/about" class="menu-item-link">关于</a>
        </li>
      
    </ul>
  </nav>
</header>
<article class="post">
  <div class="post-title">
    <h1 class="article-title">56. 合并区间</h1>
    
  </div>
   <div class="post-meta">
    <span class="post-time">2023-08-15</span>
  </div>
  <div class="post-content">
    <p>以数组 intervals 表示若干个区间的集合，其中单个区间为 intervals[i] = [starti, endi] 。请你合并所有重叠的区间，并返回 一个不重叠的区间数组，该数组需恰好覆盖输入中的所有区间 。</p>
<p>示例 1：</p>
<pre><code>输入：intervals = [[1,3],[2,6],[8,10],[15,18]]
输出：[[1,6],[8,10],[15,18]]
解释：区间 [1,3] 和 [2,6] 重叠, 将它们合并为 [1,6].
</code></pre>
<p>示例 2：</p>
<pre><code>输入：intervals = [[1,4],[4,5]]
输出：[[1,5]]
解释：区间 [1,4] 和 [4,5] 可被视为重叠区间。
</code></pre>
<p>提示：</p>
<ul>
<li>1 &lt;= intervals.length &lt;= 104</li>
<li>intervals[i].length == 2</li>
<li>0 &lt;= starti &lt;= endi &lt;= 104</li>
</ul>
<p>首先我们来看，题目要求一组区间合并后的结果，如何合并取决于两个区间的关系。那两个集合的关系共有几种呢？共四种关系：包含、被包含、有交集、无交集。具体到编码上，如何判断是哪种关系是通过判断区间的上下边界。比如你想判断[1, 3]和[2, 6]的关系，首先是否是包含关系，你得判断2和6是不是都大于等于1小于等于3，发现不是，再判断是否被包含关系，即1和3是否都大于等于2小于等于6，也不是，接着再判断是否有交集，发现是交集的。有交集的就要合并，合并后变为[1, 6]，重复这一过程处理[1, 6]与[8, 10]，直到最后一个区间。</p>
<p><img src="intervals.png" alt="intervals"></p>
<p>同时可以发现，区间的合并是有顺序性的，比如，如果先合并[1, 3]和[8, 10]，再合并[2, 6]，前两个没有交集，如果你只拿后一个[8, 10]与[2, 6]合并，最后的合并结果还是原来的三个区间，没什么变化。</p>
<p>如果有N个区间，照这种算法，复杂度应该是O(N^2)，所以我们需要对区间进行排序，排序还有一个好处，区间由“左右”两个值确定，如果按照其中一个值已经是排好序的，那判断区间关系的时候，只需要判断剩下的那个边界就可以了。你可能要问了，你怎么想到排序的，你怎么发现这种特点的？我只能说，看答案，哈哈，开句玩笑。<strong>其实这就是一种洞察力，如果你不是生而知之者，只能靠练了。</strong></p>
<p>下面开始编码，我们选取下边界进行排序，然后通过判断上边界来确定区间的关系。</p>
<pre><code class="language-java">class Solution &#123;
    public int[][] merge(int[][] intervals) &#123;
        // 按起始位置从低到高排序
        Arrays.sort(intervals, (i1, i2) -&gt; i1[0] - i2[0]);

        List&lt;int[]&gt; res = new ArrayList&lt;&gt;();
        int[] pre = intervals[0];
        for (int i = 1; i &lt; intervals.length; i++) &#123;
            int[] cur = intervals[i];
            // [[1,3],[2,6],[8,10],[15,18]]
            // 那么分别处理三种情况：无交集、有交集、包含
            if (pre[1] &lt; cur[0]) &#123; // 无交集
                res.add(pre);
                pre = cur;
            &#125; else if (pre[1] &gt;= cur[0] &amp;&amp; pre[1] &lt;= cur[1]) &#123; // 有交集
                pre[1] = cur[1];
            &#125; else &#123; // 包含
                // do nothing
            &#125;
        &#125;
        res.add(pre);
        return res.toArray(new int[0][0]);
    &#125;
&#125;
</code></pre>
<p>可以看到在处理区间关系时，处理了无交集、有交集以及包含关系，如果你还记的上面说过两个区间的关系共有四种，你就会发现少了一个被包含，原因是显而易见的，因为经过了排序，不可能存在这种关系。这样经过一遍循环就可以得到合并后的结果了。</p>
<p>总结一下，这道题有两个关键点：一是要想到两个区间的四种关系，二是使用排序简化整体逻辑。当遭遇O(N^2)复杂度时，排序通常可以作为算法武器库中一个通用兵器尝试一下，虽然它会提高局部的算法复杂度，但如果它能降低整体的算法复杂度，那么排序就是值得的。</p>
<p>对了，还有一个小问题，题目中的区间都是闭区间，<strong>如果是开区间怎么办？</strong> 一个简单的办法是如果是“左开”，那么可以在原来的值上面加一，如果是“右开”，那就在原来的值上减一。当然这些区间的值必须是整数，<strong>如果是小数，又该怎么办呢？</strong></p>

  </div>
  <div class="post-footer">
    
      <ul class="post-tag-list" itemprop="keywords"><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/hot100/" rel="tag">hot100</a></li><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/leetcode/" rel="tag">leetcode</a></li></ul>
    

    <a href="#top" class="top">返回顶部</a>
  </div>
</article>
<footer>
    &copy; 2025
    <span class="author">
        naosense
    </span>

     
        <span class="motto">
            世上无难事，只要肯登攀
        </span>
     
     
        <div id="disqus_thread">
        <script>
        /**
        *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
        *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
        var disqus_config = function () {
        this.page.url = 'https://naosense.github.io/2023/08/15/56-%E5%90%88%E5%B9%B6%E5%8C%BA%E9%97%B4/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = '2023/08/15/56-合并区间/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        this.page.title = '56. 合并区间';
        };

        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://pingao777.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
     
    </div>
</footer>


    </div>
  </body>
</html>